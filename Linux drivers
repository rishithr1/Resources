

Linux Device Drivers
1ï¸âƒ£ Simple Definition First

A Linux driver is software that allows the Linux OS (kernel) to communicate with hardware devices.

Plain English:

ğŸ‘‰ Driver = Translator between software and hardware.

â¸»

2ï¸âƒ£ Real-Life Analogy ğŸŒ

Imagine:
	â€¢	You speak English
	â€¢	Hardware speaks Chinese

You need a translator.

Linux kernel = You
Hardware = Chinese speaker
Driver = Translator

Without driver â†’ no communication.

â¸»

3ï¸âƒ£ Why Drivers Are Needed

Hardware doesnâ€™t understand:
	â€¢	Files
	â€¢	Commands
	â€¢	Programs

It only understands:
	â€¢	Electrical signals
	â€¢	Registers
	â€¢	Bit operations

Driver converts OS requests â†’ hardware signals.

â¸»

4ï¸âƒ£ Example â€” USB Pen Drive

When you plug USB:
	1.	Kernel detects USB controller
	2.	Loads USB driver
	3.	Driver communicates with device
	4.	Filesystem mounted
	5.	You see files

Without driver â†’ USB invisible.

â¸»

5ï¸âƒ£ Where Drivers Exist in Switch

Switch hardware has many components:

Hardware	Driver Needed
ASIC	Switching driver
Ethernet ports	NIC driver
EEPROM	IÂ²C driver
Fans	Thermal driver
PSU	Power monitor driver
PHY chips	MDIO driver

DiagOS loads drivers to test these.

â¸»

6ï¸âƒ£ Driver Location in Linux Architecture

User applications
        â†“
System calls
        â†“
Linux Kernel
        â†“
Device Drivers
        â†“
Hardware

Drivers sit inside kernel layer.

â¸»

7ï¸âƒ£ Visual Linux Driver Stack

â¸»

8ï¸âƒ£ Types of Linux Drivers

Drivers classified by device type.

â¸»

1ï¸âƒ£ Character Drivers

Handle byte-by-byte data.

Examples:
	â€¢	UART serial ports
	â€¢	Keyboard
	â€¢	Sensors

Data like stream.

â¸»

2ï¸âƒ£ Block Drivers

Handle storage devices.

Examples:
	â€¢	SSD
	â€¢	HDD
	â€¢	eMMC
	â€¢	SD card

Data read in blocks.

â¸»

3ï¸âƒ£ Network Drivers

Handle packet interfaces.

Examples:
	â€¢	Ethernet ports
	â€¢	Switch ASIC interfaces
	â€¢	Wi-Fi cards

Used heavily in switches.

â¸»

9ï¸âƒ£ Driver Example â€” Network Port

When packet arrives:

NIC hardware receives packet
        â†“
NIC driver copies packet
        â†“
Kernel network stack processes
        â†“
Forwarded to ASIC / CPU

Driver handles hardware interaction.

â¸»

ğŸ”Ÿ Driver Components Internally

A driver includes:

Component	Role
Init function	Loads driver
Probe function	Detects hardware
Interrupt handler	Handles hardware events
Read/write ops	Data transfer
Cleanup function	Unload driver


â¸»

1ï¸âƒ£1ï¸âƒ£ Driver Loading Process

When Linux boots:
	1.	Kernel starts
	2.	Detects hardware buses (PCI, IÂ²C, USB)
	3.	Matches device IDs
	4.	Loads corresponding driver
	5.	Initializes device

Automatic process.

â¸»

1ï¸âƒ£2ï¸âƒ£ Static vs Dynamic Drivers

Type	Meaning
Built-in	Compiled in kernel
Loadable module	Loaded at runtime

Modules use .ko files.

â¸»

Commands

lsmod       â†’ List drivers
insmod      â†’ Insert driver
rmmod       â†’ Remove driver
modprobe    â†’ Auto-load driver


â¸»

1ï¸âƒ£3ï¸âƒ£ Driver Example in Your Work

In DiagOS / ONIE:

Drivers loaded for:
	â€¢	IÂ²C â†’ EEPROM access
	â€¢	PCIe â†’ ASIC access
	â€¢	Ethernet â†’ Port bring-up
	â€¢	USB â†’ Installer media

Without drivers â†’ installation impossible.

â¸»

1ï¸âƒ£4ï¸âƒ£ Real-Life Analogy ğŸš—

OS = Driver sitting inside car
Hardware = Engine, wheels, brakes

Car exists, but without driver â†’ cannot operate.

Linux driver = person driving hardware.

â¸»

1ï¸âƒ£5ï¸âƒ£ Driver Development (BSP Work)

BSP teams:
	â€¢	Write drivers for new hardware
	â€¢	Modify kernel drivers
	â€¢	Integrate vendor SDKs
	â€¢	Enable platform bring-up

Your team touches this layer.

â¸»

1ï¸âƒ£6ï¸âƒ£ Driver Source Code Location

In Linux source:

/drivers/net
/drivers/i2c
/drivers/pci
/drivers/usb

Switch vendors add custom drivers here.

â¸»

1ï¸âƒ£7ï¸âƒ£ Driver & Interrupts

Hardware signals CPU using interrupts.

Example:

Packet arrived
   â†“
NIC triggers interrupt
   â†“
Driver interrupt handler runs
   â†“
Kernel processes packet

This makes communication efficient.

â¸»

1ï¸âƒ£8ï¸âƒ£ Driver Failures

Common debugging issues:

Issue	Impact
Missing driver	Device invisible
Wrong driver	Malfunction
Crash in driver	Kernel panic
Version mismatch	Boot failure

DiagOS detects such issues.

â¸»

1ï¸âƒ£9ï¸âƒ£ Office-Level Explanation

Beginner:

â€œDrivers allow Linux to communicate with hardware.â€

Expert:

â€œLinux device drivers operate within kernel space, interfacing directly with hardware controllers to provide standardized access for upper kernel subsystems and user space.â€

Switch context:

â€œASIC and platform peripherals are exposed to the NOS via kernel drivers integrated in the BSP.â€

â¸»

2ï¸âƒ£0ï¸âƒ£ Memory Shortcut

ğŸ‘‰ Driver = Software that controls hardware

No driver â†’ hardware useless.

â¸»

How Drivers Fit Into Your Full Stack

BIOS initializes hardware
        â†“
Kernel boots
        â†“
Drivers load
        â†“
Hardware becomes usable
        â†“
ONIE installs NOS
        â†“
NOS uses same drivers

Drivers are foundational for everything.

â¸»
